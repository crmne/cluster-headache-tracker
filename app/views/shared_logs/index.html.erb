<% content_for :title, "Headache Logs for #{@user.username}" %>
<% content_for :navbar, "Doctor's view" %>
<% content_for :web_button do %>
  <button onclick="window.print()" class="btn">
    <%= heroicon "printer", variant: "mini", class: "w-4 h-4" %>
    Print
  </button>
<% end %>
<% content_for :hotwire_button do %>
  <button onclick="window.print()" class="btn">
    <%= heroicon "printer", variant: "mini", class: "w-4 h-4" %>
    Print
  </button>
<% end %>

<div class="print:hidden join join-vertical w-full mb-4">
  <%= render "shared/filter_form" %>
</div>

<div class="mb-8">
  <h1 class="text-3xl font-bold mb-2 print:text-2xl">Cluster Headache Report for <%= @user.username %></h1>
  <p class="text-base-content/70 print:text-black">Generated by <%= link_to "clusterheadachetracker.com", "https://clusterheadachetracker.com", class: "link link-hover print:no-underline print:text-black" %> on <%= Date.today %></p>
</div>

<%= render "shared/print_instructions_modal" %>

<%= render "headache_logs/stats", headache_logs: @headache_logs %>

<h2 class="text-2xl font-bold mb-4">Analysis</h2>
<%= render partial: 'shared/charts', locals: { headache_logs: @headache_logs, chart_data: @chart_data } %>

<h2 class="text-2xl font-bold mb-4 mt-8">Detailed Log Entries</h2>
<%= turbo_stream_from @user, "headache_logs" %>
<%= render "headache_logs/table", headache_logs: @headache_logs, hide_actions: true %>

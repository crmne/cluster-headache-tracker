<%# app/views/feedback/show.html.erb %>
<% content_for :title, "Help us improve Cluster Headache Tracker" %>
<% content_for :navbar, "Feedback" %>

<div class="container mx-auto px-4">
  <div class="alert alert-info shadow-lg mb-4">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
    </svg>
    <div>
      <h3 class="font-bold">Support the Project</h3>
      <div class="text-sm">If you find this tool helpful, consider supporting its development:</div>
    </div>
    <%= link_to "https://buymeacoffee.com/crmne", target: "_blank", rel: "noopener noreferrer", class: "btn" do %>
      Buy me a pizza üçï
    <% end %>
  </div>

  <div class="relative h-[calc(100vh-16rem)]" data-controller="tally">
    <%# Loading state %>
    <div class="absolute inset-0 flex items-center justify-center bg-base-200"
         data-tally-loading-indicator>
      <span class="loading loading-spinner loading-lg text-primary"></span>
    </div>

    <iframe
      data-tally-src="https://tally.so/r/31JxWO"
      width="100%"
      height="100%"
      frameborder="0"
      marginheight="0"
      marginwidth="0"
      title="Help us improve Cluster Headache Tracker"
      onload="this.previousElementSibling.style.display = 'none'">
    </iframe>
  </div>
</div>

<% content_for :head do %>
  <script>
    window.onTallyLoad = function() {
      document.dispatchEvent(new Event('tally-loaded'))
    }
  </script>
  <script async src="https://tally.so/widgets/embed.js" onload="window.onTallyLoad()"></script>
<% end %>

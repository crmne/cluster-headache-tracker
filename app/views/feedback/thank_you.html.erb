<% content_for :title, "Thank You!" %>
<% content_for :navbar, "Thank You!" %>
<% content_for :web_button do %>
  <%= link_to "https://buymeacoffee.com/crmne", class: "btn", target: "_blank", rel: "noopener noreferrer" do %>
    <%= heroicon "heart", variant: "mini", class: "w-4 h-4" %>
    Donate
  <% end %>
<% end %>
<% content_for :hotwire_button do %>
  <%= link_to "https://buymeacoffee.com/crmne", class: "btn",
      target: "_blank",
      rel: "noopener noreferrer",
      data: {
        controller: "bridge--button",
        bridge_title: "Donate"
      } do %>
    <%= heroicon "heart", variant: "mini", class: "w-4 h-4" %>
    Donate
  <% end %>
<% end %>

<div class="container mx-auto px-4 max-w-2xl py-8" data-controller="share-link bridge--share">
  <div class="text-center mb-8">
    <div class="inline-flex items-center justify-center w-16 h-16 bg-success/20 rounded-full mb-4">
      <%= heroicon "check-circle", variant: "solid", class: "w-8 h-8 text-success" %>
    </div>
    <h1 class="text-3xl font-bold mb-2">Thank you!</h1>
    <p class="text-lg text-base-content/70">Your feedback helps make this tool better for everyone in the cluster headache community.</p>
  </div>

  <div class="card bg-base-100 shadow-md mb-6">
    <div class="card-body">
      <div class="alert alert-info mb-4">
        <%= heroicon "information-circle", variant: "mini", class: "w-5 h-5" %>
        <div>
          <h3 class="font-semibold">Want to update your feedback?</h3>
          <p class="text-sm">You can submit new feedback by deleting your previous response.</p>
        </div>
      </div>
      <%= button_to "Submit New Feedback", feedback_path, method: :delete,
          data: { turbo_confirm: "This will delete your previous feedback and allow you to submit new feedback. Continue?" },
          class: "btn btn-sm btn-outline mb-6" %>
      <h2 class="text-xl font-semibold mb-3 text-center">Help spread the word</h2>
      <p class="text-base-content/70 mb-4 text-center">Know someone else dealing with cluster headaches? They deserve a better way to track their pain too.</p>

      <div class="flex flex-col gap-3">
        <%# Hidden templates for button states %>
        <template data-share-link-target="shareTemplate">
          <%= heroicon "share", variant: "mini", class: "w-4 h-4" %>
          Share with Friends
        </template>
        <template data-share-link-target="copiedTemplate">
          <%= heroicon "check", variant: "mini", class: "w-4 h-4" %>
          Copied!
        </template>

        <%# Hidden input for URL copying %>
        <input type="hidden" data-share-link-target="input" value="https://clusterheadachetracker.com">

        <button data-share-link-target="shareButton"
                data-bridge--share-target="shareButton"
                data-action="click->bridge--share#shareViaBridge click->share-link#share"
                data-share-url="https://clusterheadachetracker.com"
                data-share-title="Cluster Headache Tracker"
                data-share-text="I'm using this free app to track my cluster headaches. It's built by someone who gets it."
                class="btn btn-primary w-full sm:w-auto mx-auto">
          <%= heroicon "share", variant: "mini", class: "w-4 h-4" %>
          Share with Friends
        </button>

        <div class="flex flex-col sm:flex-row gap-2 justify-center">
          <a href="https://twitter.com/intent/tweet?text=I'm%20using%20Cluster%20Headache%20Tracker%20to%20manage%20my%20headaches.%20It's%20free,%20private,%20and%20built%20by%20someone%20who%20gets%20it.%20Check%20it%20out:%20https://clusterheadachetracker.com"
             target="_blank"
             class="btn btn-sm btn-outline">
            Share on Twitter
          </a>
          <a href="https://www.facebook.com/sharer/sharer.php?u=https://clusterheadachetracker.com"
             target="_blank"
             class="btn btn-sm btn-outline">
            Share on Facebook
          </a>
        </div>
      </div>
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
    <div class="card bg-base-100 shadow-md">
      <div class="card-body">
        <h3 class="card-title text-lg">Brand New Mobile Apps!</h3>
        <p class="text-sm text-base-content/70">Completely new native iOS and Android apps for version 2.0! The Android app needs to be downloaded manually again.</p>
        <%= link_to "Download from homepage →", root_path, class: "link link-primary text-sm" %>
      </div>
    </div>

    <div class="card bg-base-100 shadow-md">
      <div class="card-body">
        <h3 class="card-title text-lg">Support Development</h3>
        <p class="text-sm text-base-content/70">This tool is free and will always be free. If it's helped you, consider supporting its development.</p>
        <%= link_to "Donate →", "https://buymeacoffee.com/crmne", class: "btn btn-sm btn-primary mt-2", target: "_blank", rel: "noopener noreferrer" %>
      </div>
    </div>
  </div>

  <div class="card bg-primary/10 border border-primary/20">
    <div class="card-body">
      <h3 class="text-lg font-semibold mb-2">Also from the creator</h3>
      <p class="text-sm text-base-content/70 mb-3">Stop searching through Slack and Drive. Chat With Work finds everything instantly. Your all-knowing workplace assistant that searches all your work tools at once.</p>
      <div class="flex items-center gap-3">
        <%= link_to "ChatWithWork.com", "https://chatwithwork.com", class: "btn btn-sm btn-primary", target: "_blank" %>
        <span class="text-sm text-base-content/60">Built in Germany • GDPR-compliant</span>
      </div>
    </div>
  </div>
</div>

<div class="grid">
  <div class="stats stats-vertical md:stats-horizontal shadow mb-8">
    <div class="stat">
      <div class="stat-figure text-info">
        <%= heroicon "clock", class: "inline-block h-8 w-8 stroke-current" %>
      </div>
      <div class="stat-title">Time Since Last</div>
      <div class="stat-value text-info">
        <% if last_headache = @headache_logs.max_by(&:start_time) %>
          <%= time_ago_in_words(last_headache.start_time) %>
        <% else %>
          N/A
        <% end %>
      </div>
      <div class="stat-desc"></div>
    </div>
    <div class="stat">
      <div class="stat-figure text-secondary">
        <%= heroicon "sun", class: "inline-block h-8 w-8 stroke-current" %>
      </div>
      <div class="stat-title">Headaches Today</div>
      <div class="stat-value text-secondary"><%= @headache_logs.select { |log| log.start_time.to_date == Date.today }.count %></div>
      <div class="stat-desc"></div>
    </div>
    <div class="stat">
      <div class="stat-figure text-primary">
        <%= heroicon "list-bullet", class: "inline-block h-8 w-8 stroke-current" %>
      </div>
      <div class="stat-title">Total Headaches</div>
      <div class="stat-value text-primary"><%= @headache_logs.count %></div>
      <div class="stat-desc"></div>
    </div>
    <div class="stat">
      <div class="stat-figure text-accent">
        <%= heroicon "chart-bar", class: "inline-block h-8 w-8 stroke-current" %>
      </div>
      <div class="stat-title">Average Intensity</div>
      <div class="stat-value text-accent"><%= (@headache_logs.map { |l| l.intensity }.inject { |sum, el| sum + el }.to_f / @headache_logs.size).round(2) %></div>
      <div class="stat-desc"></div>
    </div>
  </div>
</div>

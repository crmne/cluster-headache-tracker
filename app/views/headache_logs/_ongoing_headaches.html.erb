<%# app/views/headache_logs/index.html.erb - add this after the filter form %>

<%# Warning for multiple ongoing headaches %>
<% if @ongoing_headaches.size > 1 %>
  <div class="alert alert-warning shadow-lg mb-4">
    <div>
      <%= heroicon "exclamation-triangle", class: "h-6 w-6 shrink-0 stroke-current" %>
      <div>
        <h3 class="font-bold">Multiple Ongoing Headaches Detected</h3>
        <div class="text-sm">
          You have <%= @ongoing_headaches.size %> unfinished headache logs. Consider updating:
          <div class="mt-2 flex flex-wrap gap-2">
            <% @ongoing_headaches.each do |log| %>
              <%= link_to edit_headache_log_path(log), class: "btn btn-sm" do %>
                <%= heroicon "pencil-square", variant: "mini", class: "w-4 h-4 mr-1" %>
                <%= log.start_time.strftime("%B %d, %I:%M %p") %>
              <% end %>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
<% end %>

<%# Info for single ongoing headache %>
<% if @ongoing_headaches.size == 1 %>
  <% ongoing_log = @ongoing_headaches.first %>
  <div role="alert" class="alert alert-info mb-4">
    <%= heroicon "clock", class: "h-6 w-6 shrink-0" %>
    <span>
      <h3 class="font-bold">Ongoing Headache</h3>
    </span>
    <div data-controller="timer" data-timer-start-value="<%= ongoing_log.start_time.iso8601 %>">
      <div class="grid auto-cols-max grid-flow-col gap-5 text-center">
        <div class="flex flex-col" data-timer-target="daysContainer">
          <span class="countdown font-mono text-xl">
            <span data-timer-target="days" style="--value: 0;"></span>
          </span>
          days
        </div>
        <div class="flex flex-col" data-timer-target="hoursContainer">
          <span class="countdown font-mono text-xl">
            <span data-timer-target="hours" style="--value: 0;"></span>
          </span>
          hours
        </div>
        <div class="flex flex-col" data-timer-target="minutesContainer">
          <span class="countdown font-mono text-xl">
            <span data-timer-target="minutes" style="--value: 0;"></span>
          </span>
          min
        </div>
        <div class="flex flex-col" data-timer-target="secondsContainer">
          <span class="countdown font-mono text-xl">
            <span data-timer-target="seconds" style="--value: 0;"></span>
          </span>
          sec
        </div>
      </div>
    </div>
    <div>
      <%= link_to edit_headache_log_path(ongoing_log), class: "btn" do %>
        <%= heroicon "pencil-square", variant: "mini", class: "w-4 h-4 mr-1" %>
        Update Log
      <% end %>
    </div>
  </div>
<% end %>

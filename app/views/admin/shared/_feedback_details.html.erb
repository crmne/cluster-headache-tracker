<div class="card bg-base-100 shadow-xl mb-4">
  <div class="card-body">
    <h2 class="card-title mb-4">Feedback from <%= feedback_survey.user.username %></h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
      <div>
        <p class="text-sm font-semibold text-base-content/60">Submitted</p>
        <p><%= feedback_survey.created_at.strftime("%B %d, %Y at %I:%M %p") %></p>
      </div>
      <div>
        <p class="text-sm font-semibold text-base-content/60">Usage Duration</p>
        <p><%= feedback_survey.usage_duration %></p>
      </div>
    </div>

    <div class="divider"></div>

    <!-- Ratings -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
      <div>
        <p class="text-sm font-semibold text-base-content/60 mb-2">Ease of Use</p>
        <div class="rating rating-lg">
          <% (1..5).each do |i| %>
            <input type="radio" class="mask mask-star-2 bg-primary" disabled <%= "checked" if feedback_survey.ease_of_use == i %>>
          <% end %>
        </div>
      </div>
      <div>
        <p class="text-sm font-semibold text-base-content/60 mb-2">Recommendation Likelihood</p>
        <div class="rating rating-lg">
          <% (1..5).each do |i| %>
            <input type="radio" class="mask mask-star-2 bg-secondary" disabled <%= "checked" if feedback_survey.recommendation_likelihood == i %>>
          <% end %>
        </div>
      </div>
    </div>

    <div class="divider"></div>

    <!-- Platform and Features -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
      <div>
        <p class="text-sm font-semibold text-base-content/60 mb-2">Platforms Used</p>
        <% if feedback_survey.versions.present? && feedback_survey.versions.any? %>
          <div class="flex flex-wrap gap-2">
            <% feedback_survey.versions.each do |version| %>
              <span class="badge badge-primary"><%= version %></span>
            <% end %>
          </div>
        <% else %>
          <p class="text-sm text-base-content/60">No platforms specified</p>
        <% end %>
      </div>
      <div>
        <p class="text-sm font-semibold text-base-content/60 mb-2">Shared with Doctor?</p>
        <% if feedback_survey.shared_with_doctor.nil? %>
          <span class="badge badge-ghost">Not aware of feature</span>
        <% elsif feedback_survey.shared_with_doctor %>
          <span class="badge badge-success">Yes</span>
        <% else %>
          <span class="badge badge-error">No</span>
        <% end %>
      </div>
    </div>

    <% if feedback_survey.most_useful_features.present? && feedback_survey.most_useful_features.any? %>
      <div class="mb-6">
        <p class="text-sm font-semibold text-base-content/60 mb-2">Most Useful Features</p>
        <div class="flex flex-wrap gap-2">
          <% feedback_survey.most_useful_features.each do |feature| %>
            <span class="badge badge-secondary"><%= feature %></span>
          <% end %>
        </div>
      </div>
    <% end %>

    <div class="divider"></div>

    <!-- Text Responses -->
    <div class="space-y-6">
      <% if feedback_survey.impact.present? %>
        <div>
          <p class="text-sm font-semibold text-base-content/60 mb-2">Impact on Headache Management</p>
          <div class="bg-base-200 rounded-lg p-4">
            <p class="whitespace-pre-wrap"><%= feedback_survey.impact %></p>
          </div>
        </div>
      <% end %>

      <% if feedback_survey.change_suggestion.present? %>
        <div>
          <p class="text-sm font-semibold text-base-content/60 mb-2">One Thing to Change</p>
          <div class="bg-warning/10 border border-warning/20 rounded-lg p-4">
            <p class="whitespace-pre-wrap"><%= feedback_survey.change_suggestion %></p>
          </div>
        </div>
      <% end %>

      <% if feedback_survey.additional_features.present? %>
        <div>
          <p class="text-sm font-semibold text-base-content/60 mb-2">Additional Features Requested</p>
          <div class="bg-info/10 border border-info/20 rounded-lg p-4">
            <p class="whitespace-pre-wrap"><%= feedback_survey.additional_features %></p>
          </div>
        </div>
      <% end %>

      <% if feedback_survey.promotion_suggestions.present? %>
        <div>
          <p class="text-sm font-semibold text-base-content/60 mb-2">Promotion Suggestions</p>
          <div class="bg-base-200 rounded-lg p-4">
            <p class="whitespace-pre-wrap"><%= feedback_survey.promotion_suggestions %></p>
          </div>
        </div>
      <% end %>
    </div>

    <div class="divider"></div>

    <!-- Mobile Interest -->
    <div>
      <p class="text-sm font-semibold text-base-content/60 mb-2">Mobile App Interest</p>
      <p><%= case feedback_survey.mobile_interest
        when "ios" then "Yes, for iOS"
        when "android" then "Yes, for Android"
        when "both" then "Yes, for both iOS and Android"
        when "pwa" then "Using the PWA"
        when "none" then "No, web version is fine"
        else feedback_survey.mobile_interest
      end %></p>
    </div>

    <% if feedback_survey.user_agent.present? %>
      <div class="divider"></div>
      <div>
        <p class="text-sm font-semibold text-base-content/60 mb-2">User Agent</p>
        <p class="text-xs font-mono text-base-content/60"><%= feedback_survey.user_agent %></p>
      </div>
    <% end %>
  </div>
</div>
